# Docs

## 概要

`docs` は **ocrjs に関する公式ドキュメントを提供するためのパッケージ**です。

このパッケージは単なる Web 用ドキュメントではありません。  
**ocrjs の設計思想・利用方法・API 契約・エラー定義を、一貫した形で配布・参照可能にすること**を目的としています。

`docs` は、閲覧のための資料ではなく、  
**ocrjs における「正しい使い方」と「守るべき前提」を定義する公式な知識層**です。

---

## Docs をパッケージとして提供する理由

`docs` を独立したパッケージとして扱う理由は、  
ドキュメントを **成果物（artifact）として明示的に管理するため**です。

ocrjs では、コードと同等、もしくはそれ以上に  
**ドキュメントの一貫性と信頼性を重視**します。

### 1. ドキュメントサイトとしてのホスティング

- Web 上で公式ドキュメントとして公開
- ocrjs の全体像・設計思想・利用方法を体系的に提供
- バージョンごとに内容が固定され、混在しない

---

### 2. ローカル環境での利用

- パッケージをインストールするだけでドキュメントを参照可能
- オフライン環境や制限されたネットワークでも利用可能
- 実装確認・設計レビュー・検証用途を想定

---

### 3. MCP（Machine-Consumable Package）としての利用

- Markdown を構造化された知識として提供
- LLM / ツール / エージェントが **正しい前提だけを参照可能**
- doc-mcp を通じた検索・補完・ナビゲーションを想定

この設計により、  
**LLM が「推測」ではなく「仕様」を元に行動できる状態**を作ります。

---

## Docs の位置づけ（重要）

`docs` は次の役割を担います。

- ocrjs における **Single Source of Truth**
- API / エラー / 振る舞いに関する **公式な契約**
- 実装を超えて **思想・制約・前提条件を共有する層**

つまり `docs` は、

- README の延長でも
- コメントの集合でも
- ブログ記事でもない

**ocrjs というプロダクトの一部**です。

---

## ドキュメントの基本分類

すべてのドキュメントは、次の `type` を持ちます。

- `guide`  
  何から始めるか、どう使うかを説明する導線用ドキュメント

- `api`  
  公開 API の仕様・前提・制約を定義するドキュメント

- `error`  
  エラーコード・原因・対処を定義するドキュメント

- `contents`  
  補助情報・背景説明・設計メモなど（仕様ではない）

この分類は **検索・MCP・CI で前提として利用されます**。

---

## CLI によるドキュメント管理

`docs` には、専用の CLI が付属します。

この CLI は **ドキュメントを人間と機械の両方が扱える形で維持するためのツール**です。

### 基本コマンド

CLI は以下の形式で利用します。

pnpm doc <command>

---

### 新規ドキュメント作成

pnpm doc new <path> --type <type>

例：

pnpm doc new api/image/toTensor --type api

このコマンドは以下を自動生成します。

- frontmatter（author / date / type / tags）
- 基本構造（title / sections）
- 正しい配置パス

---

### ドキュメント更新

pnpm doc update <path>

オプション：

- --touch  
  date を更新する

- --author <name>  
  author を明示的に指定する

Git の user.name を自動参照しますが、  
**明示指定も可能**です。

---

### ドキュメント検証

pnpm doc check

検証内容：

- frontmatter の必須項目チェック
- type の正当性
- 構造（heading レベル）の妥当性
- doc-mcp / 検索用前提の破壊検出

CI / PR での利用を前提としています。

---

## CI/CD での利用

この CLI は CI/CD での利用を前提に設計されています。

- PR 時に docs の整合性を検証
- リリース前に仕様の欠落を検出
- LLM が参照する前提条件を保証

**ドキュメントが壊れた状態でリリースされることはありません。**

---

## 補足

- Markdown の書式を過剰に縛ることはしません
- 意味的な判断（docs が必要かどうか）は人間が行います
- 構造と契約だけを機械が保証します

---

## まとめ

- `docs` は ocrjs の公式ドキュメントパッケージ
- Web / ローカル / MCP 利用をすべて想定
- ドキュメントを成果物・契約として扱う
- CLI と CI により常に整合性を保証
- LLM と人間が **同じ仕様を参照できる状態**を作る
